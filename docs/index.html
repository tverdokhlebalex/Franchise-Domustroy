<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Главная – ДомУстрой</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Стили (сброс и основные стили) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/reset.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />

    <!-- AOS для анимаций -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
    />

    <!-- Alpine.js (через CDN) -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>

    <!-- GSAP + ScrollTrigger для анимаций логотипа -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  </head>

  <body>
    <header x-data="{ openMobileMenu: false }" class="header-upgrade">
  <div class="container-upgrade">
    <div class="header-upgrade__wrapper">
      <!-- Лого слева -->
      <img
        src="assets/images/logo-domustroi.svg"
        alt="Логотип ДомУстрой"
        class="header_logo"
      />

      <!-- Навигация по центру только на десктопе -->
      <nav class="header-upgrade__nav-desktop">
        <ul class="menu-desktop">
          <!-- Пример: если мы на index.html, ставим active -->
          <li><a href="index.html" class="">Главная</a></li>
          <!-- Пример: если мы на franchise.html, ставим active -->
          <li><a href="franchise.html" class="">О франшизе</a></li>
          <!-- Калькулятор может вести на отдельную страницу ИЛИ на #calc-block главной -->
          <li><a href="index.html#franchise-calc">Калькулятор</a></li>
        </ul>
      </nav>

      <!-- Блок справа (phone + burger) -->
      <div class="header-upgrade__right">
        <a class="phone" href="tel:+78003334130" rel="nofollow">
          <svg
            width="24"
            height="24"
            fill="none"
            stroke="#fff"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M22 16.92V20a2 2 0 0 1-2.18 2
                 A19.86 19.86 0 0 1 2 4.18
                 2 2 0 0 1 4 2h3.09
                 a2 2 0 0 1 2 1.72 
                 13.31 13.31 0 0 0 .7 2.88
                 2 2 0 0 1-.45 2.11L8.09 9.91
                 a16 16 0 0 0 6.37 6.37
                 l1.2-1.2 a2 2 0 0 1 2.11-.45
                 13.31 13.31 0 0 0 2.88.7
                 2 2 0 0 1 1.72 2z"
            />
          </svg>
        </a>

        <!-- Бургер -->
        <div
          class="icon-menu-mobile"
          @click="openMobileMenu = !openMobileMenu"
          :class="{ 'active': openMobileMenu }"
        >
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>

    <!-- Выезжающая шторка справа -->
    <div class="main-menu" :class="{ 'opened': openMobileMenu }">
      <button class="close-menu" @click="openMobileMenu = false">×</button>
      <ul class="mobile-nav">
        <li>
          <a href="index.html" @click="openMobileMenu = false">Главная</a>
        </li>
        <li>
          <a href="franchise.html" @click="openMobileMenu = false"
            >О франшизе</a
          >
        </li>
        <li>
          <a href="index.html#franchise-calc" @click="openMobileMenu = false"
            >Калькулятор</a
          >
        </li>
      </ul>
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Получаем текущий URL страницы без домена
      const currentPage =
        window.location.pathname.split("/").pop() || "index.html";
      const currentHash = window.location.hash;

      // Функция для установки активного класса
      function setActiveLink(selector) {
        document.querySelectorAll(selector).forEach((link) => {
          const linkHref = link.getAttribute("href");

          // Логика для калькулятора
          if (linkHref.includes("#calc-block")) {
            if (currentPage === "index.html" && currentHash === "#calc-block") {
              link.classList.add("active");
            } else {
              link.classList.remove("active");
            }
          }
          // Логика для остальных ссылок
          else if (linkHref === currentPage && !currentHash) {
            link.classList.add("active");
          } else {
            link.classList.remove("active");
          }
        });
      }

      // Устанавливаем активный класс для desktop и mobile меню
      setActiveLink(".menu-desktop a");
      setActiveLink(".mobile-nav a");

      // Устанавливаем класс при клике на калькулятор
      document
        .querySelectorAll('a[href="index.html#calc-block"]')
        .forEach((link) => {
          link.addEventListener("click", function () {
            document
              .querySelectorAll(".menu-desktop a, .mobile-nav a")
              .forEach((item) => {
                item.classList.remove("active");
              });
            link.classList.add("active");
          });
        });
    });
  </script>
</header>


    <main>
      <div class="page franchise-upgrade">
        <!-- Баннер -->
        <div class="hero-banner" id="heroBanner">
          <div class="hero-content">
            <h1 class="hero-title">Франшиза</h1>
            <div class="hero-logo-wrapper">
              <img
                id="heroLogo"
                src="assets/images/logo-domustroi.svg"
                alt="Логотип ДомУстрой"
                class="hero-logo-inline"
              />
            </div>
            <p class="hero-subtitle">
              Полное сопровождение • Надёжные поставщики • Современные
              инструменты маркетинга
            </p>
            <div class="cta-scroll">
              <a
                class="cta-button"
                id="autoScrollBtn"
                href="javascript:void(0)"
              >
                Начать свой бизнес
              </a>
              <img
                class="scroll-icon"
                src="assets/images/scroll.svg"
                alt="Scroll down"
              />
            </div>
          </div>
        </div>

        <!-- Преимущества -->
        <div class="advantages-section" id="advantagesBlock">
          <div class="container-upgrade">
            <h2 class="section-title">Преимущества</h2>

            <div class="advantages-grid">
              <!-- Карточка 1 -->
              <div
                class="advantage-card"
                data-order="1"
                data-aos="fade-up"
                data-aos-delay="0"
              >
                <div class="card-icon">
                  <img
                    src="assets/images/icons/ico-supplier.svg"
                    alt="Надёжные поставщики"
                  />
                </div>
                <div class="card-content">
                  <h3>Надёжные поставщики</h3>
                  <p>
                    Высококачественные товары, налаженная логистика и выгодные
                    цены.
                  </p>
                </div>
                <div class="card-number">01</div>
              </div>

              <!-- Карточка 2 -->
              <div
                class="advantage-card"
                data-order="2"
                data-aos="fade-up"
                data-aos-delay="100"
              >
                <div class="card-icon">
                  <img
                    src="assets/images/icons/ico-it.svg"
                    alt="Собственные IT-решения"
                  />
                </div>
                <div class="card-content">
                  <h3>Собственные IT-решения</h3>
                  <p>
                    Максимальная автоматизация процессов и удобная аналитика.
                  </p>
                </div>
                <div class="card-number">02</div>
              </div>

              <!-- Карточка 3 -->
              <div
                class="advantage-card"
                data-order="3"
                data-aos="fade-up"
                data-aos-delay="200"
              >
                <div class="card-icon">
                  <img
                    src="assets/images/icons/ico-marketing.svg"
                    alt="Маркетинговая поддержка"
                  />
                </div>
                <div class="card-content">
                  <h3>Маркетинговая поддержка</h3>
                  <p>
                    Рекламные материалы и консультации по продвижению для
                    партнёров.
                  </p>
                </div>
                <div class="card-number">03</div>
              </div>

              <!-- Карточка 4 -->
              <div
                class="advantage-card"
                data-order="4"
                data-aos="fade-up"
                data-aos-delay="300"
              >
                <div class="card-icon">
                  <img
                    src="assets/images/icons/ico-education.svg"
                    alt="Обучение"
                  />
                </div>
                <div class="card-content">
                  <h3>Обучение</h3>
                  <p>
                    Школа франчайзи-партнёров и всесторонняя подготовка
                    персонала.
                  </p>
                </div>
                <div class="card-number">04</div>
              </div>

              <!-- Карточка 5 -->
              <div
                class="advantage-card"
                data-order="5"
                data-aos="fade-up"
                data-aos-delay="400"
              >
                <div class="card-icon">
                  <img
                    src="assets/images/icons/ico-transparency.svg"
                    alt="Прозрачные условия"
                  />
                </div>
                <div class="card-content">
                  <h3>Прозрачные условия</h3>
                  <p>
                    Честная финансовая модель и открытая отчётность для
                    партнёров.
                  </p>
                </div>
                <div class="card-number">05</div>
              </div>

              <!-- Карточка 6 -->
              <div
                class="advantage-card"
                data-order="6"
                data-aos="fade-up"
                data-aos-delay="500"
              >
                <div class="card-icon">
                  <img
                    src="assets/images/icons/ico-support.svg"
                    alt="Индивидуальное сопровождение"
                  />
                </div>
                <div class="card-content">
                  <h3>Индивидуальное сопровождение</h3>
                  <p>
                    Персональный менеджер, маркетолог и бизнес-тренер на всех
                    этапах.
                  </p>
                </div>
                <div class="card-number">06</div>
              </div>

              <!-- Карточка 7 -->
              <div
                class="advantage-card"
                data-order="7"
                data-aos="fade-up"
                data-aos-delay="600"
              >
                <div class="card-icon">
                  <img
                    src="assets/images/icons/ico-lowrisk.svg"
                    alt="Минимальные риски"
                  />
                </div>
                <div class="card-content">
                  <h3>Минимальные риски</h3>
                  <p>
                    Экспертная поддержка, бизнес-анализ и помощь в принятии
                    решений.
                  </p>
                </div>
                <div class="card-number">07</div>
              </div>

              <!-- Карточка 8 -->
              <div
                class="advantage-card"
                data-order="8"
                data-aos="fade-up"
                data-aos-delay="700"
              >
                <div class="card-icon">
                  <img
                    src="assets/images/icons/ico-assort.svg"
                    alt="Расширенный ассортимент"
                  />
                </div>
                <div class="card-content">
                  <h3>Расширенный ассортимент</h3>
                  <p>
                    Широкий выбор товаров для дома и строительства, регулярно
                    обновляемый под тренды рынка.
                  </p>
                </div>
                <div class="card-number">08</div>
              </div>
            </div>
            <!-- /.advantages-grid -->
          </div>
          <!-- /.container-upgrade -->
        </div>
        <!-- /.advantages-section -->

        <!-- Как работает бизнес франчайзи -->
        <section class="franchise-how-it-works">
          <div class="container-upgrade">
            <h2 class="section-title">Как работает бизнес франчайзи?</h2>
            <div class="work__row">
              <!-- Левая колонка -->
              <div class="work-card">
                <h5
                  class="work-card__title"
                  data-aos="fade-up"
                  data-aos-duration="700"
                  data-aos-delay="0"
                >
                  МЫ ПРЕДОСТАВЛЯЕМ ВАМ:
                </h5>
                <ul class="work-card__list">
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="0"
                  >
                    <span>Товары по сниженным ценам</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="100"
                  >
                    <span>Настроенную экосистему (1С+CRM Битрикс)</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="200"
                  >
                    <span>Аналитику продаж и рекомендации</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="300"
                  >
                    <span>Подбор и обучение персонала</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="400"
                  >
                    <span>Маркетинговую поддержку</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="500"
                  >
                    <span>Автоматизацию аналитики</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="600"
                  >
                    <span>Техническую поддержку</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="700"
                  >
                    <span>Рекламные материалы для продвижения</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                </ul>
              </div>

              <!-- Правая колонка -->
              <div class="work-card">
                <h5
                  class="work-card__title"
                  data-aos="fade-up"
                  data-aos-duration="700"
                  data-aos-delay="0"
                >
                  ВЫ ОБЕСПЕЧИВАЕТЕ:
                </h5>
                <ul class="work-card__list">
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="0"
                  >
                    <span>Выбор и оформление помещения</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="100"
                  >
                    <span>Контроль продаж и клиентского сервиса</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="200"
                  >
                    <span>Управление персоналом</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                  <li
                    data-aos="fade-up"
                    data-aos-duration="700"
                    data-aos-delay="300"
                  >
                    <span>Выполнение маркетинговых акций</span>
                    <svg class="check-icon">
                      <use xlink:href="assets/images/sprite.svg"></use>
                    </svg>
                  </li>
                </ul>
              </div>

              <!-- Изображение -->
              <div
                class="work__image"
                data-aos="fade-left"
                data-aos-duration="700"
                data-aos-delay="300"
              >
                <figure>
                  <img
                    decoding="async"
                    loading="lazy"
                    src="assets/images/how-to.png"
                    alt="Работа франчайзи"
                  />
                </figure>
              </div>
            </div>
            <div
              class="call-button-block"
              style="text-align: center; margin-top: 40px"
            >
              <button class="btn-primary" id="openCallModal">
                Заказать звонок
              </button>
            </div>
          </div>
        </section>
        <!-- Модальное окно (скрыто по умолчанию) -->
        <div class="modal-overlay" id="callModal" style="display: none">
          <div class="modal-content">
            <button class="close-modal" id="closeCallModal">&times;</button>
            <h2>Оставьте заявку на звонок</h2>
            <form id="callRequestForm">
              <label for="callName">Ваше имя:</label>
              <input
                type="text"
                id="callName"
                name="callName"
                required
                placeholder="Иван"
              />

              <label for="callPhone">Ваш телефон:</label>
              <input
                type="text"
                id="callPhone"
                name="callPhone"
                required
                placeholder="+7 (999) 999-99-99"
              />

              <!-- Быстрые ссылки для связи -->
              <div class="quick-links">
                <p>Или свяжитесь через:</p>
                <a href="https://t.me/username" target="_blank" class="tg-link"
                  >Telegram</a
                >
                <a
                  href="https://wa.me/79991112233"
                  target="_blank"
                  class="wa-link"
                  >WhatsApp</a
                >
              </div>

              <button type="submit" class="btn-primary">Отправить</button>
            </form>
          </div>
        </div>

        <!-- Финансовые показатели (без графика окупаемости) -->
        <section
          class="financial-performance"
          data-aos="fade-up"
          data-aos-duration="700"
        >
          <div class="container-upgrade">
            <h2 class="section-title">Финансовые показатели</h2>
            <div
              class="financial-stats"
              data-aos="fade-up"
              data-aos-duration="700"
              data-aos-delay="300"
            >
              <div class="stat-item">
                <h4>Средняя годовая выручка (2024)</h4>
                <p>~3 800 тыс. ₽</p>
              </div>
              <div class="stat-item">
                <h4>Средняя прибыль</h4>
                <p>~350 тыс. ₽</p>
              </div>
              <div class="stat-item">
                <h4>Средний срок окупаемости</h4>
                <p>12–18 месяцев</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Калькулятор Франшизы -->
        <section id="franchise-calc" x-data="franchiseCalculator()" x-cloak>
          <!-- Шаг 0: Ввод контактных данных -->
          <div x-data="contactForm">
            <div x-show="step === 0" x-transition>
              <h2>Калькулятор расчета стоимости</h2>
              <div class="contact-info-block">
                <p>
                  Для начала расчета, пожалуйста, введите ваше имя и контактный
                  телефон.
                </p>
                <label>
                  Ваше имя:
                  <input type="text" x-model="contactName" placeholder="Иван" />
                </label>
                <label>
                  Контактный телефон:
                  <input
                    type="text"
                    x-model="contactPhone"
                    placeholder="+7 (999) 999-99-99"
                    @input="formatPhoneNumber"
                    @blur="validatePhone"
                  />
                </label>
                <p class="error-message" x-show="phoneError">
                  Введите корректный номер телефона
                </p>
                <div class="button-group" style="text-align: center">
                  <button
                    class="btn-primary"
                    @click="proceedToCalculation()"
                    :disabled="!contactName || !contactPhone || phoneError"
                  >
                    Перейти к расчету
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Шаг 1: Выбор параметров магазина -->
          <div x-show="step === 1" x-transition>
            <h2>Выбор параметров магазина</h2>
            <div class="calculator-block">
              <!-- Формат магазина -->
              <label>
                Формат магазина:
                <span x-text="storeFormats[storeFormatIndex].label"></span>
              </label>
              <input
                type="range"
                min="0"
                max="2"
                step="1"
                x-model="storeFormatIndex"
              />
              <div class="store-layout">
                <span
                  x-text="storeFormats[storeFormatIndex].avg + ' м²'"
                ></span>
              </div>

              <!-- Переключатель типа оборудования -->
              <label>Тип оборудования:</label>
              <div class="calc-switch equipment-switch">
                <input
                  type="radio"
                  id="equip-new"
                  name="equipment"
                  value="new"
                  x-model="equipmentType"
                />
                <label for="equip-new">Новое</label>

                <input
                  type="radio"
                  id="equip-used"
                  name="equipment"
                  value="used"
                  x-model="equipmentType"
                />
                <label for="equip-used">Б/у</label>

                <div class="calc-switch-bg"></div>
              </div>

              <!-- Товарная наполненность -->
              <label title="Сумма вложений в товарный ассортимент (руб/кв.м)">
                Товарная наполненность:
                <span x-text="productContent"></span> руб/кв.м
              </label>
              <input
                type="range"
                min="3500"
                max="60000"
                step="500"
                x-model="productContent"
              />

              <!-- Ставка за аренду -->
              <label>
                Ставка за аренду:
                <span x-text="rentRate"></span> руб/кв.м
              </label>
              <input
                type="range"
                min="350"
                max="3000"
                step="50"
                x-model="rentRate"
              />

              <div class="button-group" style="text-align: center">
                <button class="btn-primary" @click="goToStep2()">Далее</button>
              </div>
            </div>
          </div>

          <!-- Шаг 2: Итоговый расчет стоимости -->
          <div x-show="step === 2" x-transition>
            <h2>Итоговый расчет стоимости</h2>
            <div class="calculator-block">
              <!-- Переключатель формата сотрудничества -->
              <div class="calc-switch">
                <input
                  type="radio"
                  id="coop-start"
                  name="coop"
                  value="start"
                  x-model="cooperationFormat"
                />
                <label for="coop-start">Старт</label>

                <input
                  type="radio"
                  id="coop-standard"
                  name="coop"
                  value="standard"
                  x-model="cooperationFormat"
                />
                <label for="coop-standard">Стандарт</label>

                <input
                  type="radio"
                  id="coop-business"
                  name="coop"
                  value="business"
                  x-model="cooperationFormat"
                />
                <label for="coop-business">Бизнес</label>

                <div class="calc-switch-bg"></div>
              </div>

              <!-- Итоговая стоимость франшизы -->
              <div class="cost-display">
                <p>
                  Итоговая стоимость франшизы:
                  <strong x-text="formattedCost"></strong> ₽
                </p>
                <p class="note">
                  * Дополнительные расходы и условия указаны ниже
                </p>
              </div>

              <!-- Расшифровка калькуляции -->
              <div class="breakdown" x-html="breakdown"></div>

              <!-- Кнопка отправки заявки -->
              <div class="button-group" style="text-align: center">
                <button class="btn-primary" @click="submitRequest()">
                  Оставьте заявку
                </button>
                <button class="btn-secondary" @click="step = 1">Назад</button>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer class="footer">
  <div class="container footer__container">
    <!-- Левая часть: Логотип и описание -->
    <div class="footer__about">
      <a href="index.html" class="footer__logo">ДомУстрой</a>
      <p class="footer__description">
        Сеть магазинов товаров для дома и строительства.
      </p>
    </div>

    <!-- Правая часть: Контактная информация -->
    <div class="footer__contacts">
      <h4>Контакты</h4>
      <p>Телефон: <a href="tel:+79878276734">+7 (987) 827-67-34</a></p>
      <p>Email: <a href="mailto:info@domustroy.ru">info@domustroy.ru</a></p>
      <p>Адрес: г. Саратов, ул. ​Проспект Строителей, 30</p>
    </div>
  </div>

  <div class="footer__bottom">
    <p>© 2025 “ДомУстрой”. Все права защищены.</p>
    <a href="#top" class="back-to-top">Наверх ↑</a>
  </div>
</footer>


    <!-- Основные скрипты -->
    <script type="module" src="assets/js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

    <!-- Скрипт логики калькулятора -->
    <script type="module" src="assets/js/telegram.js"></script>
    <script src="assets/js/calculator.js"></script>

    <!-- Скрипт валидации (Alpine) -->
    <script>
      document.addEventListener("alpine:init", () => {
        Alpine.data("contactForm", () => ({
          step: 0,
          contactName: "",
          contactPhone: "",
          phoneError: false,

          formatPhoneNumber(event) {
            let value = event.target.value.replace(/\D/g, "");
            if (value.length > 11) {
              value = value.slice(0, 11); // Ограничиваем длину
            }

            let formatted = "+7 ";
            if (value.length > 1) formatted += "(" + value.slice(1, 4);
            if (value.length > 4) formatted += ") " + value.slice(4, 7);
            if (value.length > 7) formatted += "-" + value.slice(7, 9);
            if (value.length > 9) formatted += "-" + value.slice(9, 11);

            this.contactPhone = formatted;
          },

          validatePhone() {
            this.phoneError = !/^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(
              this.contactPhone
            );
          },

          proceedToCalculation() {
            if (!this.phoneError && this.contactName) {
              console.log("Переход к расчету...");
              this.step = 1;
            }
          },
        }));
      });
    </script>

    <!-- Скрипт анимации логотипа при скролле (GSAP + ScrollTrigger) -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        gsap.registerPlugin(ScrollTrigger);

        const heroBanner = document.getElementById("heroBanner");
        const heroLogo = document.getElementById("heroLogo");
        const heroSubtitle = document.querySelector(".hero-subtitle");

        if (!heroBanner || !heroLogo) return;

        const bannerHeight = heroBanner.offsetHeight;
        const logoHeight = heroLogo.offsetHeight;

        // Определяем начальную позицию логотипа относительно баннера
        const logoInitialTop =
          heroLogo.getBoundingClientRect().top -
          heroBanner.getBoundingClientRect().top;

        // Максимальное смещение
        const maxTranslate = bannerHeight - (logoInitialTop + logoHeight);

        gsap.to(heroLogo, {
          y: maxTranslate,
          scrollTrigger: {
            trigger: heroBanner,
            start: "top top",
            end: "bottom top",
            scrub: true,
          },
        });

        gsap.to(heroSubtitle, {
          opacity: 0,
          scrollTrigger: {
            trigger: heroBanner,
            start: "top top",
            end: "bottom top",
            scrub: true,
          },
        });
      });
    </script>

    <!-- Скрипт автопрокрутки при клике на кнопку "Начать свой бизнес" -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const autoScrollBtn = document.getElementById("autoScrollBtn");
        if (!autoScrollBtn) return;

        let scrollInterval = null;
        let isScrolling = false;

        function startAutoScroll() {
          const scrollStep = 2;
          const intervalDelay = 20;

          scrollInterval = setInterval(() => {
            window.scrollBy(0, scrollStep);
            if (
              window.innerHeight + window.scrollY >=
              document.body.offsetHeight
            ) {
              stopAutoScroll();
            }
          }, intervalDelay);

          document.addEventListener("wheel", handleUserScroll, { once: true });
          document.addEventListener("touchstart", handleUserScroll, {
            once: true,
          });
          document.addEventListener("keydown", handleUserScroll, {
            once: true,
          });

          isScrolling = true;
        }

        function stopAutoScroll() {
          clearInterval(scrollInterval);
          isScrolling = false;

          document.removeEventListener("wheel", handleUserScroll, {
            once: true,
          });
          document.removeEventListener("touchstart", handleUserScroll, {
            once: true,
          });
          document.removeEventListener("keydown", handleUserScroll, {
            once: true,
          });
        }

        function handleUserScroll() {
          stopAutoScroll();
        }

        autoScrollBtn.addEventListener("click", (e) => {
          e.preventDefault();
          if (!isScrolling) {
            startAutoScroll();
          } else {
            stopAutoScroll();
          }
        });
      });
    </script>

    <!-- Скрипт для анимации элементов с data-animate -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const elements = document.querySelectorAll("[data-animate]");

        function handleScroll() {
          const windowHeight = window.innerHeight;
          elements.forEach((el) => {
            const rect = el.getBoundingClientRect();
            if (rect.top <= windowHeight - 50) {
              el.classList.add("visible");
            } else {
              el.classList.remove("visible");
            }
          });
        }

        window.addEventListener("scroll", handleScroll);
        handleScroll();
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const openCallModalBtn = document.getElementById("openCallModal");
        const closeCallModalBtn = document.getElementById("closeCallModal");
        const callModal = document.getElementById("callModal");

        // Открыть модалку
        openCallModalBtn.addEventListener("click", () => {
          callModal.style.display = "flex";
        });

        // Закрыть модалку (по крестику)
        const closeBtn = document.getElementById("closeCallModal");
        closeBtn.addEventListener("click", () => {
          callModal.style.display = "none";
        });

        // При клике в пустую область вокруг формы тоже закрываем (необязательно)
        callModal.addEventListener("click", (e) => {
          if (e.target === callModal) {
            callModal.style.display = "none";
          }
        });

        // Обработка формы (AJAX или submit на сервер)
        const callRequestForm = document.getElementById("callRequestForm");
        callRequestForm.addEventListener("submit", async (e) => {
          e.preventDefault();

          const formData = new FormData(callRequestForm);
          const callName = formData.get("callName");
          const callPhone = formData.get("callPhone");

          // TODO: Вызов серверного API (fetch / axios)
          // Пример через fetch:
          try {
            const response = await fetch("/api/call-request", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                name: callName,
                phone: callPhone,
              }),
            });
            if (!response.ok) {
              throw new Error("Ошибка при отправке заявки");
            }
            // Закрыть модалку, почистить поля и т. д.
            alert("Ваша заявка отправлена! Скоро свяжемся.");
            callModal.style.display = "none";
            callRequestForm.reset();
          } catch (error) {
            console.error(error);
            alert("Не удалось отправить заявку. Попробуйте ещё раз.");
          }
        });
      });
    </script>
    <!-- Инициализация AOS -->
    <script>
      AOS.init();
    </script>
  </body>
</html>
